<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#4a90e2" />
    <title>GeoMoments PWA</title>
    <link rel="manifest" href="manifest.json" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>
    <link rel="stylesheet" href="style.css" />
    <link rel="apple-touch-icon" href="icons/icon-192.png" />
  </head>
  <body>
    <nav class="navbar">
      <div class="brand">GeoMoments</div>
      <div class="nav-links">
        <button
          onclick="router('home')"
          class="nav-btn active"
          data-target="home"
        >
          Galeria
        </button>
        <button onclick="router('add')" class="nav-btn" data-target="add">
          Dodaj
        </button>
        <button onclick="router('map')" class="nav-btn" data-target="map">
          Mapa
        </button>
        <button onclick="router('about')" class="nav-btn" data-target="about">
          Info
        </button>
      </div>
    </nav>

    <div id="offline-banner" class="hidden">Jeste≈õ teraz offline üì°</div>

    <main>
      <section id="home" class="view active-view">
        <h2>Twoje Momenty</h2>
        <div id="moments-list" class="grid-container">
          <p class="empty-state">Brak zapisanych moment√≥w. Dodaj pierwszy!</p>
        </div>
      </section>

      <section id="map" class="view hidden-view">
        <h2>Twoja Mapa</h2>
        <div
          id="map-container"
          style="height: 400px; width: 100%; border-radius: 10px; z-index: 1"
        ></div>
      </section>

      <section id="add" class="view hidden-view">
        <h2>Nowy Moment</h2>
        <div class="form-container">
          <div class="input-group">
            <label>1. Zdjƒôcie (Aparat lub Galeria)</label>
            <input type="file" id="cameraInput" accept="image/*" />
            <div id="preview-area"></div>
          </div>

          <div class="input-group">
            <label>2. Lokalizacja</label>
            <button id="geoBtn" class="action-btn">
              üìç Pobierz lokalizacjƒô
            </button>
            <p id="geoStatus" class="status-text">Lokalizacja nieznana</p>
          </div>

          <div class="input-group">
            <label>3. Opis</label>
            <input
              type="text"
              id="descInput"
              placeholder="Np. Rynek w Krakowie"
            />
          </div>

          <div class="input-group">
            <label>4. Notatka g≈Çosowa (max 15s)</label>
            <div class="audio-controls">
              <button id="startRecordBtn" class="action-btn">üé§ Nagraj</button>
              <button
                id="stopRecordBtn"
                class="action-btn hidden"
                style="background: #e74c3c; color: white"
              >
                ‚èπ Stop
              </button>
            </div>
            <audio
              id="audioPreview"
              controls
              class="hidden"
              style="width: 100%; margin-top: 10px"
            ></audio>
          </div>

          <button id="saveBtn" class="primary-btn">Zapisz Moment</button>
        </div>
      </section>

      <section id="about" class="view hidden-view">
        <h2>O Aplikacji</h2>
        <div class="card">
          <p>
            <strong>GeoMoments</strong> to aplikacja PWA do zapisywania
            wspomnie≈Ñ wraz z lokalizacjƒÖ.
          </p>
          <hr />
          <h3>Status:</h3>
          <p>Sieƒá: <span id="network-status">Online</span></p>
          <p>Schowek (Cache): Aktywny</p>
          <hr />
          <button id="clearData" class="danger-btn">
            Wyczy≈õƒá wszystkie dane
          </button>
        </div>
      </section>
    </main>

    <script src="app.js"></script>
  </body>
</html>
